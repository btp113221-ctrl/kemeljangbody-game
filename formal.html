<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>èº«é«”æ—èªå°å‹‡å£« é—–é—œè¨“ç·´</title>

<style>
/* ===== å…¨ç•«é¢é–å®š ===== */
body {
  margin: 0;
  height: 100vh;
  overflow: hidden;
  font-family: "Noto Sans TC", sans-serif;
  background: radial-gradient(circle at top, #355f3b, #1f3d2b);
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ===== ä¸»èˆå° ===== */
.layout {
  width: 98vw;
  height: 92vh;
  display: flex;
  gap: 20px;
}

/* å·¦ï¼šCanvaï¼ˆ2/3ï¼‰ */
.left {
  flex: 2;
  height: 100%;
}
.left iframe {
  width: 98%;
  height: 100%;
  border: none;
  border-radius: 25px;
}

/* å³ï¼šé—–é—œï¼ˆ1/3ï¼‰ */
.right {
  flex: 1;
  height: 90%;
}

/* ===== é—–é—œå¡ç‰‡ ===== */
.card {
  height: 100%;
  background: #2e5a3f;
  border-radius: 25px;
  padding: 36px;
  box-shadow: 0 15px 32px rgba(0,0,0,.4);
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
  position: relative;
}

button {
  width: 100%;
  padding: 18px;
  margin-top: 16px;
  border: none;
  border-radius: 18px;
  font-size: 26px;
  cursor: pointer;
  transition: transform 0.2s;
}

button:active {
  transform: scale(0.98);
}

.gold { background: #d4af37; color: black; font-weight: bold; }
.red  { background: #8b2c2c; color: white; font-weight: bold; }
.hidden { display: none; }


/* ===== å‹•ä½œæ’ç‰ˆ ===== */
.action-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* èª¿æ•´ç‚º2æ¬„åœ¨åµŒå…¥æ¨¡å¼ä¸‹è¼ƒæ¸…æ™° */
  gap: 8px;
  margin: 16px 0;
  font-size: 16px;
  max-height: 380px;
  overflow-y: auto;
}
.action-item {
  background: rgba(255,255,255,0.15);
  border-radius: 14px;
  padding: 10px;
}

h1 { font-size: 40px; margin-bottom: 10px; }
h2 { font-size: 30px; color: #ffd700; margin-top: 0; }
p { font-size: 22px; }

.trophy {
  font-size: 150px;
  margin: 10px 0;
  animation: trophyPop 1.2s ease-out;
}

@keyframes trophyPop {
  0% { transform: scale(0) rotate(-20deg); opacity: 0; }
  60% { transform: scale(1.3) rotate(10deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); }
}

.award-title {
  color: #ffd700;
  font-size: 48px;
}

/* è®“ Wordwall iframe æ»¿ç‰ˆä¸€é» */
.ww-container {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}
</style>
</head>

<body>

<div class="layout">
  <div class="left">
    <iframe
      src="https://www.canva.com/design/DAHAiN9EN54/OT2ZvFYJkdpeIPtuT7u4Uw/view?embed"
      allowfullscreen>
    </iframe>
  </div>

  <div class="right">
    <div class="card">
      <div id="game-ui">
        <h1>ğŸŒ² æ—èªå°å‹‡å£«</h1>
        <h2 id="title"></h2> 
        <div id="content"></div>
        
        <button id="goBtn" class="gold hidden">å‰å¾€é—œå¡</button>
        <button id="nextBtn" class="red hidden">ğŸ‰ é—–é—œæˆåŠŸï¼</button>
      </div>
    </div>
  </div>
</div>

<script>
const levels = [
  { title: "è½-vuvuçš„æ‚„æ‚„è©±", embed: "https://wordwall.net/tc/embed/97a1c0d9a947440386a4696dfb9bf5bd?themeId=1&templateId=3&fontStackId=0" },
  { title: "èªª-å‹‡å£«çš„å‚³è²ç­’", embed: "https://wordwall.net/embed/d16ae89653a94487b39a3d830521ae02?themeId=1&templateId=8&fontStackId=0" },
  { title: "åš-å®ˆè­·éƒ¨è½çš„èˆè¹ˆ", action: true },
  { title: "çµ‚æ¥µé—œå¡", tablet: true },
  { title: "é ’çå…¸ç¦®", cert: true }
];

const actions = [
  { emoji: "ğŸ§‘â€ğŸ¦±", name: "qulu", move: "æ‘¸æ‘¸é ­" },
  { emoji: "ğŸ¦¶", name: "kula", move: "åŸåœ°è¸æ­¥" },
  { emoji: "âœ‹", name: "lima", move: "æ®æ®æ‰‹" },
  { emoji: "ğŸ‘„", name: "angalj", move: "å¼µé–‹å˜´å·´" },
  { emoji: "ğŸ‘ƒ", name: "ngudjus", move: "æŒ‡é¼»å­" },
  { emoji: "ğŸ‘‚", name: "calinga", move: "æ‹‰æ‹‰è€³æœµ" },
  { emoji: "ğŸ‘€", name: "maca", move: "çœ¨çœ¨çœ¼" },
  { emoji: "ğŸ§", name: "kinacavacavan", move: "åŸåœ°è½‰ä¸€åœˆ" }
];

let current = 0;
let stage3Phase = "intro";
let gameStarted = false;

const titleEl = document.getElementById("title");
const contentEl = document.getElementById("content");
const goBtn = document.getElementById("goBtn");
const nextBtn = document.getElementById("nextBtn");

function startGame() {
  gameStarted = true;
  current = 0;
  stage3Phase = "intro";
  render();
}

function render() {
  // æ¸…é™¤å…§å®¹
  contentEl.innerHTML = "";
  
  /* ===== å°šæœªé€²å…¥éŠæˆ² ===== */
  if (!gameStarted) {
    titleEl.textContent = "æº–å‚™å¥½äº†å—ï¼Ÿ";
    contentEl.innerHTML = `
      <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹è¨“ç·´</p>
      <button class="gold" style="font-size:32px; width: 80%; margin: 20px auto;" onclick="startGame()">
        ğŸ® å†’éšªé–‹å§‹ï¼
      </button>
    `;
    goBtn.classList.add("hidden");
    nextBtn.classList.add("hidden");
    return;
  }

  const level = levels[current];
  titleEl.textContent = level.title;
  
  // é è¨­æŒ‰éˆ•ç‹€æ…‹
  goBtn.classList.add("hidden");
  nextBtn.classList.remove("hidden");

  /* ===== ç¬¬ä¸€ã€äºŒé—œï¼šWordwall åµŒå…¥ ===== */
  if (level.embed) {
    contentEl.innerHTML = `
      <div class="ww-container">
        <iframe 
          src="${level.embed}" 
          style="width:100%; height:450px; border:none; border-radius:15px;" 
          allowfullscreen>
        </iframe>
      </div>`;
    return;
  }

  /* ===== ç¬¬ä¸‰é—œï¼šå‹•ä½œæŒ‘æˆ° ===== */
  if (level.action) {
    if (stage3Phase === "intro") {
      nextBtn.classList.add("hidden");
      contentEl.innerHTML = `
        <div class="action-grid">
          ${actions.map(a => `
            <div class="action-item">
              <div style="font-size:30px">${a.emoji}</div>
              <strong>${a.name}</strong><br><small>${a.move}</small>
            </div>
          `).join("")}
        </div>
        <button class="gold" onclick="startQuiz()">æˆ‘è¨˜ä½äº†ï¼</button>
      `;
    } else if (stage3Phase === "quiz") {
      renderQuiz();
    }
    return;
  }

  /* ===== æœ€çµ‚é—œå¡ï¼šå¹³æ¿ä½¿ç”¨èªªæ˜ ===== */
  if (level.tablet) {
    contentEl.innerHTML = `
      <div style="font-size:60px; margin: 20px 0;">ğŸ“±</div>
      <p>è«‹æ‹¿èµ·æ¡Œä¸Šçš„å¹³æ¿<br>æƒæè€å¸«æä¾›çš„ QR Code</p>
    `;
    return;
  }

  /* ===== é ’ç ===== */
  if (level.cert) {
    nextBtn.classList.add("hidden");
    titleEl.innerHTML = "ğŸŠ æŒ‘æˆ°é”æˆ";
    contentEl.innerHTML = `
      <div class="trophy">ğŸ†</div>
      <h2>ä½ å®Œæˆäº†æ‰€æœ‰æŒ‘æˆ°ï¼</h2>
      <h1 class="award-title">æ£®æ—å‹‡å£«</h1>
      <button class="gold" onclick="location.reload()" style="width:auto; padding: 10px 30px;">é‡æ–°é–‹å§‹</button>
    `;
    return;
  }
}

function startQuiz() {
  stage3Phase = "quiz";
  render(); // æ”¹ç”¨ render çµ±ä¸€ç®¡ç†
}

function renderQuiz() {
  const q = actions[Math.floor(Math.random() * actions.length)];
  nextBtn.classList.add("hidden"); // æ¸¬é©—ä¸­éš±è—åŸæœ¬çš„é—–é—œæˆåŠŸéˆ•

  contentEl.innerHTML = `
    <p>ğŸ¯ è«‹åšå‡ºé€™å€‹å‹•ä½œ</p>
    <div style="font-size:90px; margin: 20px 0;">${q.emoji}</div>
    <p style="font-size:36px; color:#ffd700;">${q.name}</p>
    <div style="display:flex; gap:10px;">
      <button class="gold" onclick="renderQuiz()">ä¸‹ä¸€é¡Œ</button>
      <button class="red" onclick="finishStage3()">å®Œæˆæœ¬é—œ</button>
    </div>
  `;
}

function finishStage3() {
  current++;
  stage3Phase = "intro";
  render();
}

nextBtn.onclick = () => {
  current++;
  stage3Phase = "intro";
  render();
};

// åˆå§‹åŸ·è¡Œä¸€æ¬¡
render();
</script>

</body>
</html>