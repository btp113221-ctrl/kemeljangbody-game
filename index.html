<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>æ—èªå°å‹‡å£« - å­¸ç”ŸæŒ‘æˆ°ç‰ˆ</title>
<style>
/* ===== æ¨£å¼å„ªåŒ– ===== */
body {
  margin: 0; height: 100vh; overflow: hidden;
  font-family: "Noto Sans TC", sans-serif;
  background: linear-gradient(135deg, #1f3d2b 0%, #355f3b 100%);
  color: white; display: flex; justify-content: center; align-items: center;
}
.container { width: 95vw; height: 95vh; display: flex; flex-direction: column; }
.card {
  flex-grow: 1; background: #2e5a3f; border-radius: 20px;
  padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  display: flex; flex-direction: column; border: 3px solid rgba(255,255,255,0.1);
}
header { text-align: center; margin-bottom: 10px; }
h1 { font-size: 26px; color: #ffd700; margin: 0; }
.level-indicator { font-size: 14px; opacity: 0.8; margin-top: 5px; }

#game-content {
  flex-grow: 1; border-radius: 15px; overflow: hidden;
  background: rgba(0,0,0,0.2); margin: 10px 0;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
}
iframe { width: 100%; height: 100%; border: none; }

/* å‹•ä½œæŒ‘æˆ°æ¨£å¼ */
.quiz-emoji { font-size: 120px; margin-bottom: 10px; }
.quiz-name { font-size: 40px; font-weight: bold; color: #ffd700; }
.quiz-hint { font-size: 20px; margin-top: 10px; color: #fff; }

.footer-btn {
  width: 100%; padding: 18px; border: none; border-radius: 15px;
  font-size: 22px; font-weight: bold; cursor: pointer;
  background: #d4af37; color: black; box-shadow: 0 5px 0 #8a6d1d;
}
.footer-btn:active { transform: translateY(4px); box-shadow: none; }
.secondary-btn {
  background: #8b2c2c; color: white; box-shadow: 0 5px 0 #5a1a1a; margin-top: 10px;
}
.camera-btn { background: #3498db; color: white; box-shadow: 0 5px 0 #2980b9; }

/* éš±è—åŸç”Ÿ input ç”¨æ–¼è§¸ç™¼ç›¸æ©Ÿ */
#camera-input { display: none; }
</style>
</head>
<body>

<div class="container">
  <div class="card">
    <header>
      <h1 id="level-title">å°å‹‡å£«å‡ºç™¼ï¼</h1>
      <div class="level-indicator" id="step-info">è¼‰å…¥ä¸­...</div>
    </header>

    <div id="game-content"></div>

    <div id="button-group">
      </div>
  </div>
</div>

<input type="file" accept="image/*" capture="environment" id="camera-input">

<script>
const actions = [
  { emoji: "ğŸ§‘â€ğŸ¦±", name: "qulu", move: "æ‘¸æ‘¸é ­" },
  { emoji: "ğŸ¦¶", name: "kula", move: "åŸåœ°è¸æ­¥" },
  { emoji: "âœ‹", name: "lima", move: "æ®æ®æ‰‹" },
  { emoji: "ğŸ‘„", name: "angalj", move: "å¼µé–‹å˜´å·´" },
  { emoji: "ğŸ‘ƒ", name: "ngudjus", move: "æŒ‡é¼»å­" },
  { emoji: "ğŸ‘‚", name: "calinga", move: "æ‹‰æ‹‰è€³æœµ" },
  { emoji: "ğŸ‘€", name: "maca", move: "çœ¨çœ¨çœ¼" },
  { emoji: "ğŸ§", name: "kinacavacavan", move: "åŸåœ°è½‰ä¸€åœˆ" }
];

const studentLevels = [
  { title: "ç¬¬ä¸€é—œï¼šè½åŠ›ç‰¹è¨“", type: "wordwall", url: "https://wordwall.net/tc/embed/97a1c0d9a947440386a4696dfb9bf5bd?themeId=1&templateId=3&fontStackId=0" },
  { title: "ç¬¬äºŒé—œï¼šèªéŸ³æŒ‘æˆ°", type: "wordwall", url: "https://wordwall.net/embed/d16ae89653a94487b39a3d830521ae02?themeId=1&templateId=8&fontStackId=0" },
  { title: "ç¬¬ä¸‰é—œï¼šéš¨æ©Ÿå‹•ä½œæŒ‘æˆ°", type: "quiz" },
  { title: "çµ‚æ¥µé—œå¡ï¼šæƒæ QR Code", type: "camera" },
  { title: "é ’çå…¸ç¦®", type: "cert" }
];

let currentIdx = 0;

function render() {
  const level = studentLevels[currentIdx];
  const content = document.getElementById("game-content");
  const btnGroup = document.getElementById("button-group");
  
  document.getElementById("level-title").textContent = level.title;
  document.getElementById("step-info").textContent = `é€²åº¦ï¼š${currentIdx + 1} / ${studentLevels.length}`;
  
  content.innerHTML = "";
  btnGroup.innerHTML = "";

  if (level.type === "wordwall") {
    content.innerHTML = `<iframe src="${level.url}" allowfullscreen></iframe>`;
    btnGroup.innerHTML = `<button class="footer-btn" onclick="nextStep()">å®Œæˆæœ¬é—œï¼Œä¸‹ä¸€é—œï¼</button>`;
  } 
  else if (level.type === "quiz") {
    renderQuizItem();
  }
  else if (level.type === "camera") {
    content.innerHTML = `
      <div style="text-align:center; padding:20px;">
        <div style="font-size:80px;">ğŸ“¸</div>
        <h2 style="color:#ffd700;">çµ‚æ¥µå‹‡å£«ä»»å‹™</h2>
        <p style="font-size:22px;">è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•<br>é–‹å•Ÿç›¸æ©Ÿæƒæç¾å ´çš„ QR Code</p>
      </div>`;
    btnGroup.innerHTML = `
      <button class="footer-btn camera-btn" onclick="openCamera()">é–‹å•Ÿç›¸æ©Ÿæƒæ</button>
      <button class="footer-btn secondary-btn" onclick="nextStep()">å®Œæˆæƒæï¼Œé ˜å–çå‹µ</button>
    `;
  }
  else if (level.type === "cert") {
    content.innerHTML = `<div style="text-align:center;"><div style="font-size:100px">ğŸ†</div><h2>å‹‡å£«ç‰¹è¨“é”æˆï¼</h2><p>æ­å–œå®Œæˆæ‰€æœ‰æŒ‘æˆ°</p></div>`;
    btnGroup.innerHTML = `<button class="footer-btn" onclick="resetGame()">é‡æ–°æŒ‘æˆ°</button>`;
  }
}

// æ¸²æŸ“éš¨æ©Ÿé¡Œç›®
function renderQuizItem() {
  const content = document.getElementById("game-content");
  const btnGroup = document.getElementById("button-group");
  const q = actions[Math.floor(Math.random() * actions.length)];

  content.innerHTML = `
    <div style="font-size:24px; color:#ffd700; margin-bottom:15px;">ã€ è«‹çœ‹å¤§è¢å¹• ã€‘</div>
    <div class="quiz-emoji">${q.emoji}</div>
    <div class="quiz-name">${q.name}</div>
    <div class="quiz-hint">${q.move}</div>
  `;

  btnGroup.innerHTML = `
    <button class="footer-btn" onclick="renderQuizItem()">æ›ä¸€é¡Œç·´ç¿’</button>
    <button class="footer-btn secondary-btn" onclick="nextStep()">æˆ‘ç·´å¥½äº†ï¼Œä¸‹ä¸€é—œï¼</button>
  `;
}

// å•Ÿå‹•ç›¸æ©ŸåŠŸèƒ½
function openCamera() {
  // è§¸ç™¼éš±è—çš„ inputï¼Œé€™åœ¨è¡Œå‹•è£ç½®ä¸Šæœƒç›´æ¥è©¢å•æ˜¯å¦é–‹å•Ÿç›¸æ©Ÿ
  document.getElementById('camera-input').click();
}

function nextStep() {
  currentIdx++;
  render();
}

function resetGame() {
  currentIdx = 0;
  render();
}

render();
</script>
</body>
</html>